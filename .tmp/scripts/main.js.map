{"version":3,"sources":["../../app/scripts/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// jshint devel:true\n\"use strict\";\n\n/*\n\tIndex section\n*/\n$.material.init();\n$(\"#inputLocalization\").geocomplete().bind(\"geocode:result\", function (event, result) {\n\t$(\"#inputLat\").val(result.geometry.location.lat());\n\t$(\"#inputLng\").val(result.geometry.location.lng());\n\t$(\"#share-localization\").text(\"Añadir posición\");\n});\n\n$(\"#share-localization\").click(function getLocation() {\n\t$(this).text(\"Cargando...\");\n\tif (navigator.geolocation) {\n\n\t\tnavigator.geolocation.getCurrentPosition(function (position) {\n\t\t\t//$(\"#inputLat\").val(position.coords.latitude);\n\t\t\t//$(\"#inputLng\").val(position.coords.longitude);\n\t\t\tvar inputLoc = $(\"#inputLocalization\");\n\t\t\tinputLoc.geocomplete(\"find\", position.coords.latitude + \", \" + position.coords.longitude, function () {\n\t\t\t\tconsole.log(\"finish\");\n\t\t\t});\n\t\t\tif (inputLoc.val()) {\n\t\t\t\tinputLoc.attr('disabled', true);\n\t\t\t}\n\t\t});\n\t} else {\n\t\t$(\"#no-loc-error\").show();\n\t\t$(\"#share-localization\").text(\"Añadir posición\");\n\t}\n});\n\n$('#locationForm').validator().on('submit', function (e) {\n\t$(\"#sendBtn\").text(\"Enviando...\");\n\tif (e.isDefaultPrevented()) {\n\t\t// handle the invalid form...\n\t} else {\n\t\t\t// everything goes good\n\t\t\tvar myFirebaseRef = new Firebase(\"https://encuentra-me.firebaseio.com/locs\");\n\n\t\t\tmyFirebaseRef.push({\n\t\t\t\tlatitude: $(\"#inputLat\").val(),\n\t\t\t\tlongitude: $(\"#inputLng\").val(),\n\t\t\t\tdescription: $(\"#inputDescription\").val(),\n\t\t\t\tdate: Firebase.ServerValue.TIMESTAMP\n\t\t\t});\n\t\t\te.preventDefault();\n\t\t\t$(\"#locationForm :input\").attr(\"disabled\", true);\n\t\t\t$(\"#share-localization\").attr(\"disabled\", true);\n\t\t\t$(\"#sendBtn\").remove();\n\t\t\t$(\"#thankYou\").show();\n\t\t}\n\t});\n\n/**\n\tAdmin section\n*/\n$('#loginForm').submit(function login(event) {\n\tevent.preventDefault(); \n\tvar user = $(\"#inputUser\").val();\n\tvar pass = $(\"#inputPass\").val();\n\tvar ref = new Firebase(\"https://encuentra-me.firebaseio.com\");\n\t$(\"#loginError\").hide();\n\tref.authWithPassword({\n\t\temail: user,\n\t\tpassword: pass\n\t}, function (error, authData) {\n\t\tif (error) {\n\t\t\t$(\"#loginError\").show();\n\t\t} else {\n\t\t\t$(\"#loginError\").hide();\n\t\t\t$('#loginForm').hide();\n\t\t\tloadAdminPanel();\n\t\t\t\n\t\t}\n\t\t/* create token */\n\t\t\t/*var tokenGenerator = new FirebaseTokenGenerator(\"UEkT2QZhNed3IaHONfy7jw70bZjnUAwyijOaCWXN\");\n\t\t\tvar token = tokenGenerator.createToken({ uid: \"uniqueId1\", some: \"arbitrary\", data: \"here\" }); \t*/\n\n\t\t});\n\n\n\tevent.preventDefault();\n});\n\n//# sourceMappingURL=main.js.map\n\n\nfunction loadAdminPanel(){\n\tvar locs = new Firebase(\"https://encuentra-me.firebaseio.com/locs\");\n\tlocs.on(\"value\", function(registry) {\n\t\t/* init localizations table*/\n\t\tvar tableRows;\n\t\tvar locations = [];\n\t\tregistry.forEach(function(data) {\n\t\t\ttableRows +='<tr id=\"'+data.key()+'\"><td>'+ convertDate(data.val().date) +'</td><td>'+ data.val().description+ '</td></tr>'; \n\t\t\tvar loc = ['', data.val().latitude , data.val().longitude, 1] ;\n\t\t\tlocations.push(loc);\n\t\t});\n\t\tif(locations.length === 0){\n\t\t\ttableRows +='<tr id=\"empty\"><td>N/D</td><td>Ninguna localización guardada</td></tr>'; \n\t\t}\n\n\t\t/* init map with localizations */\n\t\tgenerateMap(locations);\n\t\t$('#tableBody').append(tableRows);\t\n\n\t}, function (errorObject) {\t\n\t\tconsole.log(\"Failed reading localizations: \" + errorObject.code);\n\t});\n\t$('#adminPanel').show();\n}\n\n/**\n - Utils -\n */\n function convertDate(inputFormat) {\n \tfunction pad(s) { return (s < 10) ? '0' + s : s; }\n \tvar d = new Date(inputFormat);\n \treturn [pad(d.getDate()), pad(d.getMonth()+1), d.getFullYear()].join('/');\n }\n\n function generateMap(locations){\t\n \tvar map = new google.maps.Map(document.getElementById('map'), {\n \t\tzoom: 15,\n \t\tcenter: new google.maps.LatLng(37.388736, -5.971162),\n \t\tmapTypeId: google.maps.MapTypeId.ROADMAP\n \t});\n\n \tvar infowindow = new google.maps.InfoWindow();\n\n \tvar marker, i;\n\n \tfor (i = 0; i < locations.length; i++) {  \n \t\tmarker = new google.maps.Marker({\n \t\t\tposition: new google.maps.LatLng(locations[i][1], locations[i][2]),\n \t\t\tmap: map\n \t\t});\n\n \t\tgoogle.maps.event.addListener(marker, 'click', (function(marker, i) {\n \t\t\treturn function() {\n \t\t\t\tinfowindow.setContent(locations[i][0]);\n \t\t\t\tinfowindow.open(map, marker);\n \t\t\t}\n \t\t})(marker, i));\n \t}\n } "]}